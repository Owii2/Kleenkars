# netlify.toml

[build]
  command = ""                 # no build; serve repo root
  publish = "."
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "20"          # pin Node.js to v20 for Netlify

[functions]
  node_bundler = "esbuild"     # bundle all deps; no externals

[[redirects]]
  from = "/admin*"
  to = "/.netlify/functions/admin-guard"
  status = 401
  force = true

# Route /api/prices to the Netlify function "prices"
[[redirects]]
  from = "/api/prices"
  to = "/.netlify/functions/prices"
  status = 200
  force = true

[[redirects]]
  from = "/api/prices/*"
  to = "/.netlify/functions/prices"
  status = 200
  force = true
